# Maintainer: Your Name <your.email@example.com>
pkgname="fm-manager"
pkgver="0.0.6"
pkgrel="1"
pkgdesc="Terminal-based project manager with tmux integration"
arch=('any')
license=('MIT')
depends=('bash' 'tmux')
source=("$pkgname-$pkgver.tar.gz")
sha256sums=('PLACEHOLDER')

package() {
    # Create necessary directories
    install -dm755 "$pkgdir/usr/share/$pkgname"
    install -dm755 "$pkgdir/usr/share/$pkgname/modules"
    install -dm755 "$pkgdir/usr/share/$pkgname/styles"
    install -dm755 "$pkgdir/usr/share/$pkgname/docs"
    install -dm755 "$pkgdir/usr/share/$pkgname/config"
    
    # Install main script
    install -Dm755 "$srcdir/startup.sh" "$pkgdir/usr/bin/$pkgname"
    
    # Install main modules index
    install -Dm644 "$srcdir/modules/index.sh" "$pkgdir/usr/share/$pkgname/modules/"
    
    # Install modules subdirectories
    cp -r "$srcdir/modules/config" "$pkgdir/usr/share/$pkgname/modules/"
    cp -r "$srcdir/modules/menu" "$pkgdir/usr/share/$pkgname/modules/"
    cp -r "$srcdir/modules/navigator" "$pkgdir/usr/share/$pkgname/modules/"
    cp -r "$srcdir/modules/project" "$pkgdir/usr/share/$pkgname/modules/"
    cp -r "$srcdir/modules/settings" "$pkgdir/usr/share/$pkgname/modules/"
    cp -r "$srcdir/modules/tmux" "$pkgdir/usr/share/$pkgname/modules/"
    cp -r "$srcdir/modules/wizard" "$pkgdir/usr/share/$pkgname/modules/"
    
    # Set proper permissions for module files
    find "$pkgdir/usr/share/$pkgname/modules" -type f -exec chmod 644 {} \;
    
    # Install styles
    install -Dm644 "$srcdir/styles/index.sh" "$pkgdir/usr/share/$pkgname/styles/"
    install -Dm644 "$srcdir/styles/colors.sh" "$pkgdir/usr/share/$pkgname/styles/"
    install -Dm644 "$srcdir/styles/ui.sh" "$pkgdir/usr/share/$pkgname/styles/"
    install -Dm644 "$srcdir/styles/animations.sh" "$pkgdir/usr/share/$pkgname/styles/"

    # Install docs
    install -Dm644 "$srcdir/docs/index.sh" "$pkgdir/usr/share/$pkgname/docs/"
    
    # Install configuration template
    install -Dm644 "$srcdir/.env" "$pkgdir/usr/share/$pkgname/.env"

    # Install config directory for runtime configuration
    install -dm755 "$pkgdir/usr/share/$pkgname/config"
    
    # Install documentation
    install -Dm644 "$srcdir/README.md" "$pkgdir/usr/share/doc/$pkgname/README.md"
}